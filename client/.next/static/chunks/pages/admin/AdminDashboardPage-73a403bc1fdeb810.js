(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5342],{3428:(e,a,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/AdminDashboardPage",function(){return t(8866)}])},8866:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>o});var r=t(7876),s=t(4232),l=t(4e3),i=t(5364);let c={title:"",slug:"",excerpt:"",date:"",readTime:"",author:"WebOrbit Studio",category:"",featuredImageSrc:"",featuredImageAlt:"",metaTitle:"",metaDescription:"",published:!0},o=()=>{let[e,a]=(0,s.useState)([]),[t,o]=(0,s.useState)("loading"),[n,d]=(0,s.useState)(c),[p,u]=(0,s.useState)(null),[m,h]=(0,s.useState)([{heading:"",paragraphs:"",bullets:""}]),[x,g]=(0,s.useState)("idle"),[b,f]=(0,s.useState)(""),y=(0,l.useRouter)(),N=i.env.NEXT_PUBLIC_API_BASE_URL||"",j=async()=>{try{o("loading");let e=await fetch(`${N}/api/admin/posts`,{credentials:"include"});if(401===e.status)return void y.push("/admin/login");let t=await e.json();if(!e.ok)throw Error(t?.error||"Failed to load posts.");a(t.posts||[]),o("ready")}catch(e){o("error")}};(0,s.useEffect)(()=>{j()},[]);let w=(e,a,t)=>{h(r=>r.map((r,s)=>s===e?{...r,[a]:t}:r))},v=async e=>{e.preventDefault();try{if(g("saving"),f(""),!p)throw Error("Featured image file is required.");let e=new FormData;e.append("image",p);let a=await fetch(`${N}/api/admin/uploads`,{method:"POST",body:e,credentials:"include"}),t=await a.json();if(!a.ok)throw Error(t?.error||"Failed to upload image.");let r=m.filter(e=>e.heading.trim()).map(e=>({heading:e.heading.trim(),paragraphs:e.paragraphs.split("\n").map(e=>e.trim()).filter(Boolean),bullets:e.bullets.split("\n").map(e=>e.trim()).filter(Boolean)})),s={title:n.title,slug:n.slug,excerpt:n.excerpt,date:n.date,readTime:n.readTime,author:n.author,category:n.category,featuredImage:{src:t.url,alt:n.featuredImageAlt},sections:r,metaTitle:n.metaTitle,metaDescription:n.metaDescription,published:n.published},l=await fetch(`${N}/api/admin/posts`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(s)}),i=await l.json();if(!l.ok)throw Error(i?.error||"Failed to create post.");g("success"),f("Post created successfully."),d(c),u(null),h([{heading:"",paragraphs:"",bullets:""}]),j()}catch(e){g("error"),f(e instanceof Error?e.message:"Failed to create post.")}},k=async e=>{confirm("Delete this post?")&&(await fetch(`${N}/api/admin/posts/${e}`,{method:"DELETE",credentials:"include"}),j())},C=async()=>{await fetch(`${N}/api/admin/logout`,{method:"POST",credentials:"include"}),y.push("/admin/login")};return(0,r.jsx)("section",{className:"bg-black text-white min-h-screen pt-28 pb-20 font-body-alt",children:(0,r.jsxs)("div",{className:"page-container",children:[(0,r.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-primary font-mono uppercase tracking-[0.35em] text-xs",children:"Admin"}),(0,r.jsx)("h1",{className:"mt-4 text-3xl md:text-5xl font-heading",children:"Blog Manager"})]}),(0,r.jsx)("button",{onClick:C,className:"border border-white/20 px-5 py-2 text-xs uppercase tracking-[0.3em] hover:border-primary hover:text-primary transition-colors",children:"Logout"})]}),(0,r.jsxs)("div",{className:"mt-12 grid lg:grid-cols-[1.2fr_1fr] gap-10",children:[(0,r.jsxs)("form",{onSubmit:v,className:"bg-white/5 border border-white/10 p-8 space-y-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold",children:"Create New Post"}),(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-xs uppercase tracking-[0.3em] text-gray-500",children:"Title"}),(0,r.jsx)("input",{value:n.title,onChange:e=>d({...n,title:e.target.value}),className:"w-full bg-black border border-white/10 p-3 text-white focus:outline-none focus:border-primary",required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-xs uppercase tracking-[0.3em] text-gray-500",children:"Slug"}),(0,r.jsx)("input",{value:n.slug,onChange:e=>d({...n,slug:e.target.value}),className:"w-full bg-black border border-white/10 p-3 text-white focus:outline-none focus:border-primary",placeholder:"auto-generated if empty"})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-xs uppercase tracking-[0.3em] text-gray-500",children:"Excerpt"}),(0,r.jsx)("textarea",{value:n.excerpt,onChange:e=>d({...n,excerpt:e.target.value}),rows:3,className:"w-full bg-black border border-white/10 p-3 text-white focus:outline-none focus:border-primary",required:!0})]}),(0,r.jsxs)("div",{className:"grid md:grid-cols-3 gap-6",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-xs uppercase tracking-[0.3em] text-gray-500",children:"Date"}),(0,r.jsx)("input",{type:"date",value:n.date,onChange:e=>d({...n,date:e.target.value}),className:"w-full bg-black border border-white/10 p-3 text-white focus:outline-none focus:border-primary"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-xs uppercase tracking-[0.3em] text-gray-500",children:"Read Time"}),(0,r.jsx)("input",{value:n.readTime,onChange:e=>d({...n,readTime:e.target.value}),className:"w-full bg-black border border-white/10 p-3 text-white focus:outline-none focus:border-primary",placeholder:"5 min read"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-xs uppercase tracking-[0.3em] text-gray-500",children:"Category"}),(0,r.jsx)("input",{value:n.category,onChange:e=>d({...n,category:e.target.value}),className:"w-full bg-black border border-white/10 p-3 text-white focus:outline-none focus:border-primary",required:!0})]})]}),(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-xs uppercase tracking-[0.3em] text-gray-500",children:"Author"}),(0,r.jsx)("input",{value:n.author,onChange:e=>d({...n,author:e.target.value}),className:"w-full bg-black border border-white/10 p-3 text-white focus:outline-none focus:border-primary",required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-xs uppercase tracking-[0.3em] text-gray-500",children:"Published"}),(0,r.jsxs)("select",{value:n.published?"yes":"no",onChange:e=>d({...n,published:"yes"===e.target.value}),className:"w-full bg-black border border-white/10 p-3 text-white focus:outline-none focus:border-primary",children:[(0,r.jsx)("option",{value:"yes",children:"Yes"}),(0,r.jsx)("option",{value:"no",children:"No"})]})]})]}),(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-xs uppercase tracking-[0.3em] text-gray-500",children:"Featured Image (Upload)"}),(0,r.jsx)("input",{type:"file",accept:"image/*",onChange:e=>u(e.target.files?.[0]||null),className:"w-full bg-black border border-white/10 p-3 text-white focus:outline-none focus:border-primary",required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-xs uppercase tracking-[0.3em] text-gray-500",children:"Image Alt Text"}),(0,r.jsx)("input",{value:n.featuredImageAlt,onChange:e=>d({...n,featuredImageAlt:e.target.value}),className:"w-full bg-black border border-white/10 p-3 text-white focus:outline-none focus:border-primary",required:!0})]})]}),(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-xs uppercase tracking-[0.3em] text-gray-500",children:"Meta Title"}),(0,r.jsx)("input",{value:n.metaTitle,onChange:e=>d({...n,metaTitle:e.target.value}),className:"w-full bg-black border border-white/10 p-3 text-white focus:outline-none focus:border-primary",placeholder:"Optional SEO title"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-xs uppercase tracking-[0.3em] text-gray-500",children:"Meta Description"}),(0,r.jsx)("input",{value:n.metaDescription,onChange:e=>d({...n,metaDescription:e.target.value}),className:"w-full bg-black border border-white/10 p-3 text-white focus:outline-none focus:border-primary",placeholder:"Optional SEO description"})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"text-sm uppercase tracking-[0.3em] text-gray-500",children:"Sections"}),(0,r.jsx)("button",{type:"button",onClick:()=>{h(e=>[...e,{heading:"",paragraphs:"",bullets:""}])},className:"text-primary text-xs uppercase tracking-[0.3em]",children:"Add Section"})]}),m.map((e,a)=>(0,r.jsxs)("div",{className:"border border-white/10 p-4 space-y-3",children:[(0,r.jsx)("input",{value:e.heading,onChange:e=>w(a,"heading",e.target.value),className:"w-full bg-black border border-white/10 p-2 text-white focus:outline-none focus:border-primary",placeholder:`Section ${a+1} heading`}),(0,r.jsx)("textarea",{value:e.paragraphs,onChange:e=>w(a,"paragraphs",e.target.value),rows:3,className:"w-full bg-black border border-white/10 p-2 text-white focus:outline-none focus:border-primary",placeholder:"Paragraphs (one per line)"}),(0,r.jsx)("textarea",{value:e.bullets,onChange:e=>w(a,"bullets",e.target.value),rows:2,className:"w-full bg-black border border-white/10 p-2 text-white focus:outline-none focus:border-primary",placeholder:"Bullets (one per line)"}),m.length>1&&(0,r.jsx)("button",{type:"button",onClick:()=>{h(e=>e.filter((e,t)=>t!==a))},className:"text-red-400 text-xs uppercase tracking-[0.3em]",children:"Remove"})]},a))]}),b&&(0,r.jsx)("p",{className:"error"===x?"text-red-500":"text-primary",children:b}),(0,r.jsx)("button",{type:"submit",disabled:"saving"===x,className:"w-full bg-primary text-black py-3 text-xs uppercase tracking-[0.3em] font-bold hover:bg-white transition-colors",children:"saving"===x?"Saving...":"Publish Post"})]}),(0,r.jsxs)("div",{className:"bg-white/5 border border-white/10 p-8",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold",children:"Existing Posts"}),"loading"===t&&(0,r.jsx)("p",{className:"text-gray-400 mt-4",children:"Loading posts..."}),"error"===t&&(0,r.jsx)("p",{className:"text-red-500 mt-4",children:"Failed to load posts."}),"ready"===t&&0===e.length&&(0,r.jsx)("p",{className:"text-gray-400 mt-4",children:"No posts yet."}),(0,r.jsx)("div",{className:"mt-6 space-y-4",children:e.map(e=>(0,r.jsxs)("div",{className:"border border-white/10 p-4",children:[(0,r.jsx)("p",{className:"text-xs uppercase tracking-[0.3em] text-gray-500",children:e.category}),(0,r.jsx)("h3",{className:"text-lg font-semibold mt-2",children:e.title}),(0,r.jsx)("p",{className:"text-gray-400 text-sm",children:e.date}),(0,r.jsxs)("div",{className:"mt-3 flex items-center gap-3",children:[(0,r.jsx)("span",{className:`text-xs uppercase tracking-[0.3em] ${e.published?"text-primary":"text-gray-500"}`,children:e.published?"Published":"Draft"}),(0,r.jsx)("button",{type:"button",onClick:()=>k(e._id),className:"text-red-400 text-xs uppercase tracking-[0.3em]",children:"Delete"})]})]},e.slug))})]})]})]})})}}},e=>{e.O(0,[4e3,636,6593,8792],()=>e(e.s=3428)),_N_E=e.O()}]);