(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3698],{3321:(e,a,t)=>{"use strict";var s=t(4645);t.o(s,"useParams")&&t.d(a,{useParams:function(){return s.useParams}}),t.o(s,"usePathname")&&t.d(a,{usePathname:function(){return s.usePathname}}),t.o(s,"useRouter")&&t.d(a,{useRouter:function(){return s.useRouter}}),t.o(s,"useSearchParams")&&t.d(a,{useSearchParams:function(){return s.useSearchParams}})},9039:(e,a,t)=>{Promise.resolve().then(t.bind(t,9455))},9455:(e,a,t)=>{"use strict";t.d(a,{default:()=>c});var s=t(5155),r=t(2115),l=t(3321);let i={title:"",slug:"",excerpt:"",date:"",readTime:"",author:"WebOrbit Studio",category:"",featuredImageSrc:"",featuredImageAlt:"",metaTitle:"",metaDescription:"",published:!0},c=()=>{let[e,a]=(0,r.useState)([]),[t,c]=(0,r.useState)("loading"),[n,o]=(0,r.useState)(i),[d,u]=(0,r.useState)([{heading:"",paragraphs:"",bullets:""}]),[p,m]=(0,r.useState)("idle"),[h,x]=(0,r.useState)(""),g=(0,l.useRouter)(),b="http://localhost:4000",f=async()=>{try{c("loading");let e=await fetch(`${b}/api/admin/posts`,{credentials:"include"});if(401===e.status)return void g.push("/admin/login");let t=await e.json();if(!e.ok)throw Error(t?.error||"Failed to load posts.");a(t.posts||[]),c("ready")}catch(e){c("error")}};(0,r.useEffect)(()=>{f()},[]);let y=(e,a,t)=>{u(s=>s.map((s,r)=>r===e?{...s,[a]:t}:s))},j=async e=>{e.preventDefault();try{m("saving"),x("");let e=d.filter(e=>e.heading.trim()).map(e=>({heading:e.heading.trim(),paragraphs:e.paragraphs.split("\n").map(e=>e.trim()).filter(Boolean),bullets:e.bullets.split("\n").map(e=>e.trim()).filter(Boolean)})),a={title:n.title,slug:n.slug,excerpt:n.excerpt,date:n.date,readTime:n.readTime,author:n.author,category:n.category,featuredImage:{src:n.featuredImageSrc,alt:n.featuredImageAlt},sections:e,metaTitle:n.metaTitle,metaDescription:n.metaDescription,published:n.published},t=await fetch(`${b}/api/admin/posts`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(a)}),s=await t.json();if(!t.ok)throw Error(s?.error||"Failed to create post.");m("success"),x("Post created successfully."),o(i),u([{heading:"",paragraphs:"",bullets:""}]),f()}catch(e){m("error"),x(e instanceof Error?e.message:"Failed to create post.")}},N=async e=>{confirm("Delete this post?")&&(await fetch(`${b}/api/admin/posts/${e}`,{method:"DELETE",credentials:"include"}),f())},v=async()=>{await fetch(`${b}/api/admin/logout`,{method:"POST",credentials:"include"}),g.push("/admin/login")};return(0,s.jsx)("section",{className:"bg-black text-white min-h-screen pt-28 pb-20 font-body-alt",children:(0,s.jsxs)("div",{className:"page-container",children:[(0,s.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-primary font-mono uppercase tracking-[0.35em] text-xs",children:"Admin"}),(0,s.jsx)("h1",{className:"mt-4 text-3xl md:text-5xl font-heading",children:"Blog Manager"})]}),(0,s.jsx)("button",{onClick:v,className:"border border-white/20 px-5 py-2 text-xs uppercase tracking-[0.3em] hover:border-primary hover:text-primary transition-colors",children:"Logout"})]}),(0,s.jsxs)("div",{className:"mt-12 grid lg:grid-cols-[1.2fr_1fr] gap-10",children:[(0,s.jsxs)("form",{onSubmit:j,className:"bg-white/5 border border-white/10 p-8 space-y-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold",children:"Create New Post"}),(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-xs uppercase tracking-[0.3em] text-gray-500",children:"Title"}),(0,s.jsx)("input",{value:n.title,onChange:e=>o({...n,title:e.target.value}),className:"w-full bg-black border border-white/10 p-3 text-white focus:outline-none focus:border-primary",required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-xs uppercase tracking-[0.3em] text-gray-500",children:"Slug"}),(0,s.jsx)("input",{value:n.slug,onChange:e=>o({...n,slug:e.target.value}),className:"w-full bg-black border border-white/10 p-3 text-white focus:outline-none focus:border-primary",placeholder:"auto-generated if empty"})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-xs uppercase tracking-[0.3em] text-gray-500",children:"Excerpt"}),(0,s.jsx)("textarea",{value:n.excerpt,onChange:e=>o({...n,excerpt:e.target.value}),rows:3,className:"w-full bg-black border border-white/10 p-3 text-white focus:outline-none focus:border-primary",required:!0})]}),(0,s.jsxs)("div",{className:"grid md:grid-cols-3 gap-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-xs uppercase tracking-[0.3em] text-gray-500",children:"Date"}),(0,s.jsx)("input",{type:"date",value:n.date,onChange:e=>o({...n,date:e.target.value}),className:"w-full bg-black border border-white/10 p-3 text-white focus:outline-none focus:border-primary"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-xs uppercase tracking-[0.3em] text-gray-500",children:"Read Time"}),(0,s.jsx)("input",{value:n.readTime,onChange:e=>o({...n,readTime:e.target.value}),className:"w-full bg-black border border-white/10 p-3 text-white focus:outline-none focus:border-primary",placeholder:"5 min read"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-xs uppercase tracking-[0.3em] text-gray-500",children:"Category"}),(0,s.jsx)("input",{value:n.category,onChange:e=>o({...n,category:e.target.value}),className:"w-full bg-black border border-white/10 p-3 text-white focus:outline-none focus:border-primary",required:!0})]})]}),(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-xs uppercase tracking-[0.3em] text-gray-500",children:"Author"}),(0,s.jsx)("input",{value:n.author,onChange:e=>o({...n,author:e.target.value}),className:"w-full bg-black border border-white/10 p-3 text-white focus:outline-none focus:border-primary",required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-xs uppercase tracking-[0.3em] text-gray-500",children:"Published"}),(0,s.jsxs)("select",{value:n.published?"yes":"no",onChange:e=>o({...n,published:"yes"===e.target.value}),className:"w-full bg-black border border-white/10 p-3 text-white focus:outline-none focus:border-primary",children:[(0,s.jsx)("option",{value:"yes",children:"Yes"}),(0,s.jsx)("option",{value:"no",children:"No"})]})]})]}),(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-xs uppercase tracking-[0.3em] text-gray-500",children:"Featured Image URL (WebP)"}),(0,s.jsx)("input",{value:n.featuredImageSrc,onChange:e=>o({...n,featuredImageSrc:e.target.value}),className:"w-full bg-black border border-white/10 p-3 text-white focus:outline-none focus:border-primary",required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-xs uppercase tracking-[0.3em] text-gray-500",children:"Image Alt Text"}),(0,s.jsx)("input",{value:n.featuredImageAlt,onChange:e=>o({...n,featuredImageAlt:e.target.value}),className:"w-full bg-black border border-white/10 p-3 text-white focus:outline-none focus:border-primary",required:!0})]})]}),(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-xs uppercase tracking-[0.3em] text-gray-500",children:"Meta Title"}),(0,s.jsx)("input",{value:n.metaTitle,onChange:e=>o({...n,metaTitle:e.target.value}),className:"w-full bg-black border border-white/10 p-3 text-white focus:outline-none focus:border-primary",placeholder:"Optional SEO title"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-xs uppercase tracking-[0.3em] text-gray-500",children:"Meta Description"}),(0,s.jsx)("input",{value:n.metaDescription,onChange:e=>o({...n,metaDescription:e.target.value}),className:"w-full bg-black border border-white/10 p-3 text-white focus:outline-none focus:border-primary",placeholder:"Optional SEO description"})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h3",{className:"text-sm uppercase tracking-[0.3em] text-gray-500",children:"Sections"}),(0,s.jsx)("button",{type:"button",onClick:()=>{u(e=>[...e,{heading:"",paragraphs:"",bullets:""}])},className:"text-primary text-xs uppercase tracking-[0.3em]",children:"Add Section"})]}),d.map((e,a)=>(0,s.jsxs)("div",{className:"border border-white/10 p-4 space-y-3",children:[(0,s.jsx)("input",{value:e.heading,onChange:e=>y(a,"heading",e.target.value),className:"w-full bg-black border border-white/10 p-2 text-white focus:outline-none focus:border-primary",placeholder:`Section ${a+1} heading`}),(0,s.jsx)("textarea",{value:e.paragraphs,onChange:e=>y(a,"paragraphs",e.target.value),rows:3,className:"w-full bg-black border border-white/10 p-2 text-white focus:outline-none focus:border-primary",placeholder:"Paragraphs (one per line)"}),(0,s.jsx)("textarea",{value:e.bullets,onChange:e=>y(a,"bullets",e.target.value),rows:2,className:"w-full bg-black border border-white/10 p-2 text-white focus:outline-none focus:border-primary",placeholder:"Bullets (one per line)"}),d.length>1&&(0,s.jsx)("button",{type:"button",onClick:()=>{u(e=>e.filter((e,t)=>t!==a))},className:"text-red-400 text-xs uppercase tracking-[0.3em]",children:"Remove"})]},a))]}),h&&(0,s.jsx)("p",{className:"error"===p?"text-red-500":"text-primary",children:h}),(0,s.jsx)("button",{type:"submit",disabled:"saving"===p,className:"w-full bg-primary text-black py-3 text-xs uppercase tracking-[0.3em] font-bold hover:bg-white transition-colors",children:"saving"===p?"Saving...":"Publish Post"})]}),(0,s.jsxs)("div",{className:"bg-white/5 border border-white/10 p-8",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold",children:"Existing Posts"}),"loading"===t&&(0,s.jsx)("p",{className:"text-gray-400 mt-4",children:"Loading posts..."}),"error"===t&&(0,s.jsx)("p",{className:"text-red-500 mt-4",children:"Failed to load posts."}),"ready"===t&&0===e.length&&(0,s.jsx)("p",{className:"text-gray-400 mt-4",children:"No posts yet."}),(0,s.jsx)("div",{className:"mt-6 space-y-4",children:e.map(e=>(0,s.jsxs)("div",{className:"border border-white/10 p-4",children:[(0,s.jsx)("p",{className:"text-xs uppercase tracking-[0.3em] text-gray-500",children:e.category}),(0,s.jsx)("h3",{className:"text-lg font-semibold mt-2",children:e.title}),(0,s.jsx)("p",{className:"text-gray-400 text-sm",children:e.date}),(0,s.jsxs)("div",{className:"mt-3 flex items-center gap-3",children:[(0,s.jsx)("span",{className:`text-xs uppercase tracking-[0.3em] ${e.published?"text-primary":"text-gray-500"}`,children:e.published?"Published":"Draft"}),(0,s.jsx)("button",{type:"button",onClick:()=>N(e._id),className:"text-red-400 text-xs uppercase tracking-[0.3em]",children:"Delete"})]})]},e.slug))})]})]})]})})}}},e=>{e.O(0,[8441,3794,7358],()=>e(e.s=9039)),_N_E=e.O()}]);