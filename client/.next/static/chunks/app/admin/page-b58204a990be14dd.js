(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3698],{3321:(e,a,t)=>{"use strict";var r=t(4645);t.o(r,"useParams")&&t.d(a,{useParams:function(){return r.useParams}}),t.o(r,"usePathname")&&t.d(a,{usePathname:function(){return r.usePathname}}),t.o(r,"useRouter")&&t.d(a,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(a,{useSearchParams:function(){return r.useSearchParams}})},9039:(e,a,t)=>{Promise.resolve().then(t.bind(t,9455))},9455:(e,a,t)=>{"use strict";t.d(a,{default:()=>c});var r=t(5155),s=t(2115),l=t(3321);let i={title:"",slug:"",excerpt:"",date:"",readTime:"",author:"WebOrbit Studio",category:"",featuredImageSrc:"",featuredImageAlt:"",metaTitle:"",metaDescription:"",published:!0},c=()=>{let[e,a]=(0,s.useState)([]),[t,c]=(0,s.useState)("loading"),[o,n]=(0,s.useState)(i),[d,u]=(0,s.useState)(null),[p,m]=(0,s.useState)([{heading:"",paragraphs:"",bullets:""}]),[h,x]=(0,s.useState)("idle"),[g,b]=(0,s.useState)(""),f=(0,l.useRouter)(),y="http://localhost:4000",j=async()=>{try{c("loading");let e=await fetch(`${y}/api/admin/posts`,{credentials:"include"});if(401===e.status)return void f.push("/admin/login");let t=await e.json();if(!e.ok)throw Error(t?.error||"Failed to load posts.");a(t.posts||[]),c("ready")}catch(e){c("error")}};(0,s.useEffect)(()=>{j()},[]);let N=(e,a,t)=>{m(r=>r.map((r,s)=>s===e?{...r,[a]:t}:r))},w=async e=>{e.preventDefault();try{if(x("saving"),b(""),!d)throw Error("Featured image file is required.");let e=new FormData;e.append("image",d);let a=await fetch(`${y}/api/admin/uploads`,{method:"POST",body:e,credentials:"include"}),t=await a.json();if(!a.ok)throw Error(t?.error||"Failed to upload image.");let r=p.filter(e=>e.heading.trim()).map(e=>({heading:e.heading.trim(),paragraphs:e.paragraphs.split("\n").map(e=>e.trim()).filter(Boolean),bullets:e.bullets.split("\n").map(e=>e.trim()).filter(Boolean)})),s={title:o.title,slug:o.slug,excerpt:o.excerpt,date:o.date,readTime:o.readTime,author:o.author,category:o.category,featuredImage:{src:t.url,alt:o.featuredImageAlt},sections:r,metaTitle:o.metaTitle,metaDescription:o.metaDescription,published:o.published},l=await fetch(`${y}/api/admin/posts`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(s)}),c=await l.json();if(!l.ok)throw Error(c?.error||"Failed to create post.");x("success"),b("Post created successfully."),n(i),u(null),m([{heading:"",paragraphs:"",bullets:""}]),j()}catch(e){x("error"),b(e instanceof Error?e.message:"Failed to create post.")}},v=async e=>{confirm("Delete this post?")&&(await fetch(`${y}/api/admin/posts/${e}`,{method:"DELETE",credentials:"include"}),j())},k=async()=>{await fetch(`${y}/api/admin/logout`,{method:"POST",credentials:"include"}),f.push("/admin/login")};return(0,r.jsx)("section",{className:"bg-black text-white min-h-screen pt-28 pb-20 font-body-alt",children:(0,r.jsxs)("div",{className:"page-container",children:[(0,r.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-primary font-mono uppercase tracking-[0.35em] text-xs",children:"Admin"}),(0,r.jsx)("h1",{className:"mt-4 text-3xl md:text-5xl font-heading",children:"Blog Manager"})]}),(0,r.jsx)("button",{onClick:k,className:"border border-white/20 px-5 py-2 text-xs uppercase tracking-[0.3em] hover:border-primary hover:text-primary transition-colors",children:"Logout"})]}),(0,r.jsxs)("div",{className:"mt-12 grid lg:grid-cols-[1.2fr_1fr] gap-10",children:[(0,r.jsxs)("form",{onSubmit:w,className:"bg-white/5 border border-white/10 p-8 space-y-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold",children:"Create New Post"}),(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-xs uppercase tracking-[0.3em] text-gray-500",children:"Title"}),(0,r.jsx)("input",{value:o.title,onChange:e=>n({...o,title:e.target.value}),className:"w-full bg-black border border-white/10 p-3 text-white focus:outline-none focus:border-primary",required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-xs uppercase tracking-[0.3em] text-gray-500",children:"Slug"}),(0,r.jsx)("input",{value:o.slug,onChange:e=>n({...o,slug:e.target.value}),className:"w-full bg-black border border-white/10 p-3 text-white focus:outline-none focus:border-primary",placeholder:"auto-generated if empty"})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-xs uppercase tracking-[0.3em] text-gray-500",children:"Excerpt"}),(0,r.jsx)("textarea",{value:o.excerpt,onChange:e=>n({...o,excerpt:e.target.value}),rows:3,className:"w-full bg-black border border-white/10 p-3 text-white focus:outline-none focus:border-primary",required:!0})]}),(0,r.jsxs)("div",{className:"grid md:grid-cols-3 gap-6",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-xs uppercase tracking-[0.3em] text-gray-500",children:"Date"}),(0,r.jsx)("input",{type:"date",value:o.date,onChange:e=>n({...o,date:e.target.value}),className:"w-full bg-black border border-white/10 p-3 text-white focus:outline-none focus:border-primary"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-xs uppercase tracking-[0.3em] text-gray-500",children:"Read Time"}),(0,r.jsx)("input",{value:o.readTime,onChange:e=>n({...o,readTime:e.target.value}),className:"w-full bg-black border border-white/10 p-3 text-white focus:outline-none focus:border-primary",placeholder:"5 min read"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-xs uppercase tracking-[0.3em] text-gray-500",children:"Category"}),(0,r.jsx)("input",{value:o.category,onChange:e=>n({...o,category:e.target.value}),className:"w-full bg-black border border-white/10 p-3 text-white focus:outline-none focus:border-primary",required:!0})]})]}),(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-xs uppercase tracking-[0.3em] text-gray-500",children:"Author"}),(0,r.jsx)("input",{value:o.author,onChange:e=>n({...o,author:e.target.value}),className:"w-full bg-black border border-white/10 p-3 text-white focus:outline-none focus:border-primary",required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-xs uppercase tracking-[0.3em] text-gray-500",children:"Published"}),(0,r.jsxs)("select",{value:o.published?"yes":"no",onChange:e=>n({...o,published:"yes"===e.target.value}),className:"w-full bg-black border border-white/10 p-3 text-white focus:outline-none focus:border-primary",children:[(0,r.jsx)("option",{value:"yes",children:"Yes"}),(0,r.jsx)("option",{value:"no",children:"No"})]})]})]}),(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-xs uppercase tracking-[0.3em] text-gray-500",children:"Featured Image (Upload)"}),(0,r.jsx)("input",{type:"file",accept:"image/*",onChange:e=>u(e.target.files?.[0]||null),className:"w-full bg-black border border-white/10 p-3 text-white focus:outline-none focus:border-primary",required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-xs uppercase tracking-[0.3em] text-gray-500",children:"Image Alt Text"}),(0,r.jsx)("input",{value:o.featuredImageAlt,onChange:e=>n({...o,featuredImageAlt:e.target.value}),className:"w-full bg-black border border-white/10 p-3 text-white focus:outline-none focus:border-primary",required:!0})]})]}),(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-xs uppercase tracking-[0.3em] text-gray-500",children:"Meta Title"}),(0,r.jsx)("input",{value:o.metaTitle,onChange:e=>n({...o,metaTitle:e.target.value}),className:"w-full bg-black border border-white/10 p-3 text-white focus:outline-none focus:border-primary",placeholder:"Optional SEO title"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-xs uppercase tracking-[0.3em] text-gray-500",children:"Meta Description"}),(0,r.jsx)("input",{value:o.metaDescription,onChange:e=>n({...o,metaDescription:e.target.value}),className:"w-full bg-black border border-white/10 p-3 text-white focus:outline-none focus:border-primary",placeholder:"Optional SEO description"})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"text-sm uppercase tracking-[0.3em] text-gray-500",children:"Sections"}),(0,r.jsx)("button",{type:"button",onClick:()=>{m(e=>[...e,{heading:"",paragraphs:"",bullets:""}])},className:"text-primary text-xs uppercase tracking-[0.3em]",children:"Add Section"})]}),p.map((e,a)=>(0,r.jsxs)("div",{className:"border border-white/10 p-4 space-y-3",children:[(0,r.jsx)("input",{value:e.heading,onChange:e=>N(a,"heading",e.target.value),className:"w-full bg-black border border-white/10 p-2 text-white focus:outline-none focus:border-primary",placeholder:`Section ${a+1} heading`}),(0,r.jsx)("textarea",{value:e.paragraphs,onChange:e=>N(a,"paragraphs",e.target.value),rows:3,className:"w-full bg-black border border-white/10 p-2 text-white focus:outline-none focus:border-primary",placeholder:"Paragraphs (one per line)"}),(0,r.jsx)("textarea",{value:e.bullets,onChange:e=>N(a,"bullets",e.target.value),rows:2,className:"w-full bg-black border border-white/10 p-2 text-white focus:outline-none focus:border-primary",placeholder:"Bullets (one per line)"}),p.length>1&&(0,r.jsx)("button",{type:"button",onClick:()=>{m(e=>e.filter((e,t)=>t!==a))},className:"text-red-400 text-xs uppercase tracking-[0.3em]",children:"Remove"})]},a))]}),g&&(0,r.jsx)("p",{className:"error"===h?"text-red-500":"text-primary",children:g}),(0,r.jsx)("button",{type:"submit",disabled:"saving"===h,className:"w-full bg-primary text-black py-3 text-xs uppercase tracking-[0.3em] font-bold hover:bg-white transition-colors",children:"saving"===h?"Saving...":"Publish Post"})]}),(0,r.jsxs)("div",{className:"bg-white/5 border border-white/10 p-8",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold",children:"Existing Posts"}),"loading"===t&&(0,r.jsx)("p",{className:"text-gray-400 mt-4",children:"Loading posts..."}),"error"===t&&(0,r.jsx)("p",{className:"text-red-500 mt-4",children:"Failed to load posts."}),"ready"===t&&0===e.length&&(0,r.jsx)("p",{className:"text-gray-400 mt-4",children:"No posts yet."}),(0,r.jsx)("div",{className:"mt-6 space-y-4",children:e.map(e=>(0,r.jsxs)("div",{className:"border border-white/10 p-4",children:[(0,r.jsx)("p",{className:"text-xs uppercase tracking-[0.3em] text-gray-500",children:e.category}),(0,r.jsx)("h3",{className:"text-lg font-semibold mt-2",children:e.title}),(0,r.jsx)("p",{className:"text-gray-400 text-sm",children:e.date}),(0,r.jsxs)("div",{className:"mt-3 flex items-center gap-3",children:[(0,r.jsx)("span",{className:`text-xs uppercase tracking-[0.3em] ${e.published?"text-primary":"text-gray-500"}`,children:e.published?"Published":"Draft"}),(0,r.jsx)("button",{type:"button",onClick:()=>v(e._id),className:"text-red-400 text-xs uppercase tracking-[0.3em]",children:"Delete"})]})]},e.slug))})]})]})]})})}}},e=>{e.O(0,[8441,3794,7358],()=>e(e.s=9039)),_N_E=e.O()}]);